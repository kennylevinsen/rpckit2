{{ $struct := false }}
{{ range .Fields }}
{{ if .T.IsStruct }}
{{ $struct = .T }}
{{ template "go/types.go.tmpl" dict "Fields" .T.Fields }}
{{ else if or .T.IsArray .T.IsMap }}
{{ if .T.InnerValue.IsStruct }}
{{ $struct = .T.InnerValue }}
{{ template "go/types.go.tmpl" dict "Fields" .T.InnerValue.Fields }}
{{ end }}
{{ end }}
{{ end }}

{{ if $struct }}
type {{ $struct.GoType }} struct {
{{- range $struct.Fields }}
    {{ capitalize .Name }} {{ .T.GoType }}
{{- end }}
}
{{ end }}
